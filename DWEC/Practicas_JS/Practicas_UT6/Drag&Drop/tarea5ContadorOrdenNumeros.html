<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Swap + Orden</title>
</head>

<style>
  #lista {
    display: flex;
  }

  div {
    text-align: center;
    font-size: 3rem;
    border: black 1px solid;
    background-color: orange;
    margin: 2px;
    height: 4rem;
    width: 4rem;
    user-select: none;
  }
</style>

<body>
  <button onclick="contador()">Iniciar</button>
  <p id="salida"></p>
  <main id="lista"></main>

  <script>
    let crono = 0;
    let intervalo;
    let elementoArrastrado = null;

    function contador() {
      document.getElementById("lista").innerHTML = "";
      crono = 0;
      clearInterval(intervalo);

      intervalo = setInterval(() => {
        document.getElementById("salida").textContent = `${++crono} Segundos`;
      }, 1000);

      for (let i = 1; i <= 10; i++) {
        const k = document.createElement("div");
        k.textContent = Math.floor(Math.random() * 100);
        k.setAttribute("draggable", "true");

        k.addEventListener("dragstart", dragStart);
        k.addEventListener("dragover", dragOver);
        k.addEventListener("dragend", drag);
        k.addEventListener("drop", drop);

        document.getElementById("lista").appendChild(k);
      }
    }

      function dragStart(e) {
        elementoArrastrado = this;
      }
      
      function dragOver(e) {
        e.preventDefault();
      }
      
      function drag(e) {
      }
      
      function drop(e) {
        e.preventDefault();
        e.target.style.backgroundColor = "red";
      
      // e.target.style.backgroundColor = "orange";
      
      if (this !== elementoArrastrado) {
        const temp = this.textContent;
        this.textContent = elementoArrastrado.textContent;
        elementoArrastrado.textContent = temp;
        
        comprobarOrden();
      }
    }

    function comprobarOrden() {
      const valores = [...document.querySelectorAll("#lista div")].map(
        d => Number(d.textContent)
      );

      const ordenado = [...valores].sort((a, b) => a - b);

      let estaOrdenado = true;

      for (let i = 0; i < valores.length - 1; i++) {
        if (valores[i] > valores[i + 1]) {
          estaOrdenado = false;
          break;
        }
      }

      if (estaOrdenado) {
        clearInterval(intervalo);
        alert("Â¡Ordenado correctamente en " + crono + " segundos!");
      }

    }
  </script>
</body>

</html>